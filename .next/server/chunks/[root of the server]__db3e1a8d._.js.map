{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///home/emily/semanticode/src/app/api/analyze/route.ts"],"sourcesContent":["import { NextResponse, NextRequest } from 'next/server';\n\ntype AnalyzeResponse =\n  | { results: string }\n  | { error: string; details: string | ExecException };\n\nexport async function GET(req: NextRequest): Promise<NextResponse<AnalyzeResponse>> {\n  console.log(req)\n  const id = req.nextUrl.searchParams.get('id');\n  const apiKey = process.env.API_KEY;\n\n  if (!id) {\n    console.log(req)\n    return NextResponse.json(\n      { error: 'Missing \"id\" parameter', details: 'No ID provided in query.' },\n      { status: 400 }\n    );\n  }\n\n  try {\n    const html = getTempPage(id);\n\n    if (!html) {\n      return NextResponse.json(\n        { error: 'Page not found', details: 'No HTML found for the given ID.' },\n        { status: 404 }\n      );\n    }\n\n    const urlToAnalyze = `https://seuapp.vercel.app/api/preview/${id}`;\n\n    const apiUrl = `https://www.googleapis.com/pagespeedonline/v5/runPagespeed?url=${encodeURIComponent(\n      urlToAnalyze,\n    )}&category=ACCESSIBILITY&category=SEO&strategy=desktop&key=${apiKey}`;\n    console.log('URL to analyze:', apiUrl)\n\n    const res = await fetch(apiUrl);\n    console.log(res)\n    const data = await res.json();\n\n    if (!res.ok) {\n      return NextResponse.json(\n        { error: 'Lighthouse API error', details: JSON.stringify(data) },\n        { status: 500 }\n      );\n    }\n\n    return NextResponse.json({ results: data }, { status: 200 });\n  } catch (err: any) {\n    return NextResponse.json(\n      { error: 'Unexpected error', details: err.message },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;AAAA;;AAMO,eAAe,IAAI,GAAgB;IACxC,QAAQ,GAAG,CAAC;IACZ,MAAM,KAAK,IAAI,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;IACxC,MAAM,SAAS,QAAQ,GAAG,CAAC,OAAO;IAElC,IAAI,CAAC,IAAI;QACP,QAAQ,GAAG,CAAC;QACZ,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAA0B,SAAS;QAA2B,GACvE;YAAE,QAAQ;QAAI;IAElB;IAEA,IAAI;QACF,MAAM,OAAO,YAAY;QAEzB,IAAI,CAAC,MAAM;YACT,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;gBAAkB,SAAS;YAAkC,GACtE;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,eAAe,CAAC,sCAAsC,EAAE,IAAI;QAElE,MAAM,SAAS,CAAC,+DAA+D,EAAE,mBAC/E,cACA,0DAA0D,EAAE,QAAQ;QACtE,QAAQ,GAAG,CAAC,mBAAmB;QAE/B,MAAM,MAAM,MAAM,MAAM;QACxB,QAAQ,GAAG,CAAC;QACZ,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;gBAAwB,SAAS,KAAK,SAAS,CAAC;YAAM,GAC/D;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK,GAAG;YAAE,QAAQ;QAAI;IAC5D,EAAE,OAAO,KAAU;QACjB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAAoB,SAAS,IAAI,OAAO;QAAC,GAClD;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}